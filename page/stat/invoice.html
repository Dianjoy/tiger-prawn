<div class="form-inline table-header">
  <div class="form-group">
    <label for="pagesize">每页显示：</label>
    <select class="form-control" id="pagesize">
      <option selected>10</option>
      <option>20</option>
      <option>50</option>
    </select>
  </div>
  <div class="form-group">
    <label for="treasurer-verify">财务审核：</label>
    <select class="form-control" id="treasurer-verify" name="financy_status">
      <option value="">全部</option>
      <option value="0">通过</option>
      <option value="1">未通过</option>
    </select>
  </div>
  <div class="form-group">
    <label for="director-verify">地区负责人审核：</label>
    <select class="form-control" id="director-verify" name="charger_status">
      <option value="">全部</option>
      <option value="0">通过</option>
      <option value="1">未通过</option>
    </select>
  </div>
  <div class="form-group">
    <label>运营核对：</label>
    <select class="form-control"  name="operation_status">
      <option value="">全部</option>
      <option value="0">通过</option>
      <option value="1">未通过</option>
    </select>
  </div>
  <div class="form-group">
    <label>特批：</label>
    <select class="form-control"  name="special_status">
      <option value="">全部</option>
      <option value="0">通过</option>
      <option value="1">未通过</option>
    </select>
  </div>
  <div class="form-group pull-right">
    <label for="search-query">搜索：</label>
    <input type="search" class="form-control" id="search-query">
  </div>
</div>

<table class="table table-bordered table-hover responsive-table smart-table" data-ranger=".date-range" data-url="{{API}}invoice/" data-start="-31" data-end="0" data-pagination=".pagination" data-pagesize-controller="#pagesize" data-pagesize="10" data-search="#search-query" data-filter=".table-header">
  <thead>
  <tr>
    <th>申请日期</th>
    <th>付款方</th>
    <th>金额</th>
    <th>运营核对</th>
    <th>特批</th>
    <th>财务审核</th>
    <th>地区负责人审核</th>
    <th>快递单号</th>
    <th>发票号码</th>
    <th>开票日期</th>
    <th>操作</th>
  </tr>
  </thead>
  <tbody>
  <script type="text/x-handlebars-template">
    <tr id="{{id}}">
      <td data-title="申请日期">
        {{apply_time}}
      </td>
      <td data-title="付款方">{{#if company}}{{company}}{{else}}{{full_name}}{{/if}}</td>
      <td data-title="金额">{{income}}</td>
      <td data-title="运营核对">
        {{#in sub_status '1' '3'}}
        审核中
        {{/in}}
        {{#equal sub_status 10}}
        {{#if reason}}
        <button type="button" class="btn btn-primary" data-toggle="popover" data-content="{{reason}}" data-title="未通过原因">不通过</button>
        {{else}}
        不通过
        {{/if}}
        {{/equal}}
        {{#in sub_status '11' '20' '21' '30' '31' '40' '41'}}
        通过
        {{/in}}
        {{#in sub_status '0' '2'}}
          -
        {{/in}}
      </td>
      <td data-title="特批">
        {{#in sub_status '2' '3' '11'}}
        审核中
        {{/in}}
        {{#equal sub_status 20}}
        {{#if reason}}
        <button type="button" class="btn btn-primary" data-toggle="popover" data-content="{{reason}}" data-title="未通过原因">不通过</button>
        {{else}}
        不通过
        {{/if}}
        {{/equal}}
        {{#in sub_status '21' '30' '31' '40' '41'}}
        通过
        {{/in}}
        {{#in sub_status '0' '1' '10'}}
        -
        {{/in}}
      </td>
      <td data-title="财务审核">
        {{#in sub_status '0' '1' '2' '3' '11' '21'}}
        审核中
        {{/in}}
        {{#equal sub_status 30}}
        {{#if reason}}
        <button type="button" class="btn btn-primary" data-toggle="popover" data-content="{{reason}}" data-title="未通过原因">不通过</button>
        {{else}}
        不通过
        {{/if}}
        {{/equal}}
        {{#in sub_status '31' '40' '41'}}
        通过
        {{/in}}
        {{#in sub_status '10' '20'}}
        -
        {{/in}}
      </td>
      <td data-title="地区负责人审核">
        {{#in sub_status '0' '1' '2' '3' '11' '21' '31'}}
        审核中
        {{/in}}
        {{#equal sub_status 40}}
        {{#if reason}}
        <button type="button" class="btn btn-primary" data-toggle="popover" data-content="{{reason}}" data-title="未通过原因">不通过</button>
        {{else}}
        不通过
        {{/if}}
        {{/equal}}
        {{#in sub_status '41'}}
        通过
        {{/in}}
        {{#in sub_status '10' '20' '30'}}
        -
        {{/in}}
      </td>
      <td data-title="快递单号">
        {{#if is_beijing}}
          {{#equal sub_status 41}}
            {{#if express_number}}
              <a href="#express_number" class="edit" title="编辑">{{express_number}}</a>
            {{else}}
              <a href="#express_number" class="btn btn-primary edit" title="编辑"><i class="fa fa-edit"></i>填写单号</a>
            {{/if}}
          {{/equal}}
        {{else}}
        {{express_number}}
        {{/if}}
      </td>

      <td data-title="发票号码">{{number}}</td>

      <td data-title="发票日期">{{handle_time}}</td>

      <td data-title="操作">
        <div class="btn-group">
          {{#in sub_status '0' '1' '2' '3'}}
          <a href="#/invoice/detail/{{id}}" class="btn btn-primary" title="编辑"><i class="fa fa-edit"></i></a>
          <button class="btn btn-danger delete-button" title="删除"><i class="fa fa-trash-o fa-fw"></i></button>
          {{/in}}
          {{#in sub_status '10' '20' '30' '40'}}
          <a href="#/invoice/reapply/{{id}}" class="btn btn-success" title="重新申请"><i class="fa fa-edit"></i></a>
          {{/in}}
          {{#in sub_status '11' '21' '31' '41'}}
          <a href="#/invoice/view/{{id}}" class="btn btn-info" title="发票详情"><i class="fa fa-file-text"></i></a>
          {{/in}}
        </div>
      </td>
    </tr>
  </script>
  </tbody>
  <tfoot class="waiting">
  <tr>
    <td colspan="10"><p align="center"><i class="fa fa-spinner fa-spin fa-2x"></i><br>加载中，请稍候</p></td>
  </tr>
  </tfoot>
</table>

<nav class="pull-right">
  <ul class="pagination">
    <script type="text/x-handlebars-template">
      <li><a href="#/to/{{prev}}"><i class="fa fa-chevron-left"></i></a></li>
      {{#each pages}}
      <li class="hidden-xs"><a href="#/to/{{index}}">{{label}}</a></li>
      {{/each}}
      <li><a href="#/to/{{next}}"><i class="fa fa-chevron-right"></i></a></li>
    </script>
  </ul>
</nav>


